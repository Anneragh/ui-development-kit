<div class="connect-container">
  <!-- Top Navigation Bar -->
  <div class="top-nav-bar">
    <!-- Left Section: Environment Selection or Connection Status -->
    <div class="nav-left">
      <mat-form-field *ngIf="!isConnected" appearance="outline" class="environment-select">
        <mat-label>Environment</mat-label>
        <mat-select [(value)]="selectedTenant" (selectionChange)="updateTenant()">
          <mat-option value="new">+ Create New Environment</mat-option>
          <mat-option *ngFor="let tenant of tenants" [value]="tenant.name">
            {{ tenant.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="connection-status" *ngIf="isConnected">
        <mat-icon class="connected-icon">check_circle</mat-icon>
        <span class="tenant-name">Connected to {{name}}</span>
      </div>
    </div>

    <!-- Center Section: Main Action Button -->
    <div class="nav-center">
      <button mat-raised-button 
              *ngIf="!isConnected" 
              (click)="connectToISC()" 
              [disabled]="selectedTenant === 'new'"
              class="connect-button">
        <mat-icon>{{ actualTenant?.authType === 'oauth' ? 'launch' : 'usb' }}</mat-icon>
        {{ actualTenant?.authType === 'oauth' ? 'Connect with OAuth' : 'Connect with PAT' }}
      </button>
      
      <button mat-raised-button 
              *ngIf="isConnected" 
              (click)="disconnectFromISC()"
              class="disconnect-button">
        <mat-icon>logout</mat-icon>
        Disconnect
      </button>
    </div>

    <!-- Right Section: Action Buttons -->
    <div class="nav-right">
      <button mat-icon-button 
              *ngIf="!isConnected" 
              (click)="refreshTenants()" 
              title="Refresh Environments" 
              class="action-button refresh-button">
        <mat-icon>refresh</mat-icon>
      </button>

      <button mat-icon-button 
              *ngIf="!isConnected" 
              (click)="openEnvironmentConfig()" 
              title="Configure Environments" 
              class="action-button config-button">
        <mat-icon>settings</mat-icon>
      </button>
    </div>
  </div>

  <!-- Auth Method Indicator -->
  <div *ngIf="!isConnected && actualTenant" class="auth-method-indicator">
    <mat-icon class="auth-icon">{{ isOAuthMode ? 'verified_user' : 'vpn_key' }}</mat-icon>
    <span class="auth-text">{{ authMethodDescription }}</span>
  </div>
</div>

